<?xml version="1.0" encoding="utf-8"?>
<robot name="atom_arm" xmlns:xacro="http://www.ros.org/wiki/xacro">

	<xacro:macro name="AtomArm" params="name direction:=1 parent_link">
		<xacro:property name="prefix" value="${name + '_' if name else ''}"/>

		<!-- Shoulder Pitch Link -->
		<link name="${prefix}shoulder_pitch_link">
			<inertial>
				<origin xyz="0.0044 ${direction*0.0368} 0.0000"/>
				<mass value="0.4473"/>
				<inertia ixx="0.0007" ixy="${direction*0.0001}" ixz="-0.0001" iyy="0.0008" iyz="0.0000" izz="0.0010"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link1.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
		</link>

		<joint name="${prefix}shoulder_pitch_joint" type="revolute">
			<origin xyz="0 ${direction*0.128} 0.333"/>
			<parent link="${parent_link}"/>
			<child link="${prefix}shoulder_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-2.97" upper="2.97" effort="56" velocity="2.62"/>
		</joint>

		<!-- Shoulder Roll Link -->
		<link name="${prefix}shoulder_roll_link">
			<inertial>
				<origin xyz="0.0124 ${direction*0.0009} -0.0545"/>
				<mass value="1.7940"/>
				<inertia ixx="0.0066" ixy="0.0000" ixz="0.0004" iyy="0.0067" iyz="0.0000" izz="0.0013"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link2.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			
		</link>

		<joint name="${prefix}shoulder_roll_joint" type="revolute">
			<origin xyz="0 ${direction*0.078} 0" rpy="${direction*0.18} 0 0"/>
			<parent link="${prefix}shoulder_pitch_link"/>
			<child link="${prefix}shoulder_roll_link"/>
			<axis xyz="1 0 0"/>
			<limit lower="${-0.43 if direction > 0 else -3.14}" upper="${3.14 if direction > 0 else 0.43}" effort="36"
						 velocity="2.62"/>
		</joint>

		<!-- Shoulder Yaw Link -->
		<link name="${prefix}shoulder_yaw_link">
			<inertial>
				<origin xyz="-0.0014 ${direction*0.0066} -0.1179"/>
				<mass value="0.9798"/>
				<inertia ixx="0.0018" ixy="0.0000" ixz="-0.0001" iyy="0.0016" iyz="${-direction*0.0001}" izz="0.0008"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link3.obj"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0 0 0"/>
				<geometry>
					<cylinder radius="0.04" length="0.20"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}shoulder_yaw_joint" type="revolute">
			<origin xyz="0 0 -0.135"/>
			<parent link="${prefix}shoulder_roll_link"/>
			<child link="${prefix}shoulder_yaw_link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-2.97" upper="2.97" effort="36" velocity="2.62"/>
		</joint>

		<!-- Elbow Pitch Link -->
		<link name="${prefix}elbow_pitch_link">
			<inertial>
				<origin xyz="0.0903 ${direction*0.0016} -0.0003"/>
				<mass value="0.8548"/>
				<inertia ixx="0.0008" ixy="${-direction*0.0001}" ixz="0.0000" iyy="0.0025" iyz="${-direction*0.0000}"
								 izz="0.0028"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link4.obj"/>
				</geometry>
			</visual>
			<collision>
				<origin rpy="1.57079632679 0 0"/>
				<geometry>
					<cylinder radius="0.04" length="0.11"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}elbow_pitch_joint" type="revolute">
			<origin xyz="0.00044198773719138 0 -0.130000000000198"/>
			<parent link="${prefix}shoulder_yaw_link"/>
			<child link="${prefix}elbow_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-1.57" upper="2" effort="36" velocity="2.62"/>
		</joint>

		<!-- Elbow Roll Link -->
		<link name="${prefix}elbow_roll_link">
			<inertial>
				<origin xyz="0.0270 ${direction*0.0018} -0.0002"/>
				<mass value="0.2126"/>
				<inertia ixx="0.0003" ixy="0.0000" ixz="0.0000" iyy="0.0002" iyz="0.0000" izz="0.0003"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link5.obj"/>
				</geometry>
			</visual>
			<collision>
                <origin 
				    xyz="-0.04 0 0"
				    rpy="0 1.57079632679 0"/>
                <geometry>
                    <cylinder radius="0.045" length="0.15"/>
                </geometry>
            </collision>
		</link>

		<joint name="${prefix}elbow_roll_joint" type="revolute">
			<origin xyz="0.1453 0 0"/>
			<parent link="${prefix}elbow_pitch_link"/>
			<child link="${prefix}elbow_roll_link"/>
			<axis xyz="1 0 0"/>
			<limit lower="-2.97" upper="2.97" effort="18.6" velocity="2.62"/>
		</joint>

		<!-- Wrist Pitch Link -->
		<link name="${prefix}wrist_pitch_link">
			<inertial>
				<origin xyz="0.0421 ${-direction*0.0042} -0.0038"/>
				<mass value="1.2573"/>
				<inertia ixx="0.0008" ixy="${direction*0.0002}" ixz="-0.0002" iyy="0.0029" iyz="0.0000" izz="0.0029"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link6.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<origin rpy="1.57079632679 0 0"/>
				<geometry>
					<cylinder radius="0.035" length="0.09"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}wrist_pitch_joint" type="revolute">
			<origin xyz="0.05345 0 0"/>
			<parent link="${prefix}elbow_roll_link"/>
			<child link="${prefix}wrist_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-1.57" upper="1.57" effort="18.6" velocity="2.62"/>
		</joint>

		<!-- Wrist Yaw Link -->
		<link name="${prefix}wrist_yaw_link">
			<inertial>
				<origin xyz="0.0290 ${direction*0.0004} 0.0010"/>
				<mass value="0.3340"/>
				<inertia ixx="0.0003" ixy="0.0000" ixz="0.0000" iyy="0.0004" iyz="${-direction*0.0000}" izz="0.0003"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find dobot_atom_description)/meshes/arm/link7.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
                <origin rpy="0 0 0"/>
                <geometry>
                    <cylinder radius="0.035" length="0.09"/>
                </geometry>
            </collision>
		</link>

		<joint name="${prefix}wrist_yaw_joint" type="revolute">
			<origin xyz="0.085 0 0"/>
			<parent link="${prefix}wrist_pitch_link"/>
			<child link="${prefix}wrist_yaw_link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-1.57" upper="1.57" effort="18.6" velocity="2.62"/>
		</joint>

	</xacro:macro>

</robot>

